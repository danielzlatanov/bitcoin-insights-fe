<div class="flex flex-col justify-center items-center">
  <div class="relative">
    <form (ngSubmit)="onSearch(searchInput.value)">
      <input
        #searchInput
        type="search"
        name="search"
        placeholder="search for address, transaction, or block..."
        class="bg-gray-700 text-xs text-white h-10 md:h-12 px-4 pr-10 rounded-lg rounded-b-md focus:outline-none w-[300px] sm:w-[500px] border-b-2 focus:border-orange-400 transition-all duration-300 ease-in-out"
        autocomplete="off"
      />

      <button type="submit" class="absolute right-3 top-3.5">
        <svg
          class="h-3 w-3 md:h-5 md:w-5 text-white lg:hover:text-orange-400 duration-200"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          viewBox="0 0 56.966 56.966"
          fill="currentColor"
        >
          <path
            d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"
          />
        </svg>
      </button>
    </form>
  </div>

  <div class="my-4 lg:my-8">
    <ul
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 px-6 text-white w-[320px] sm:w-full mb-10 lg:mb-0"
    >
      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 flex items-center justify-center shadow-sm shadow-white md:shadow-inner md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <i class="fa-brands fa-bitcoin mr-2 text-2xl lg:text-3xl"></i>
        <p class="mr-2">Bitcoin</p>
        <p class="text-gray-500">BTC</p>
      </li>

      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 text-center shadow-sm shadow-white md:shadow-inner md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <div class="flex items-center justify-center mb-2">
          <i class="fa-solid fa-cubes mr-2 text-xl lg:text-2xl"></i>
          <p class="text-gray-400">Blocks</p>
        </div>

        <ng-container
          *ngIf="
            blockchainInfo && blockchainInfo.blocks !== undefined;
            else spinner
          "
        >
          <p>{{ blockchainInfo.blocks }}</p>
        </ng-container>

        <ng-template #spinner>
          <app-spinner></app-spinner>
        </ng-template>
      </li>

      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 text-center shadow-sm shadow-white md:shadow-inner md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <div class="flex items-center justify-center mb-2">
          <i class="fa-solid fa-chain mr-2 text-xl lg:text-2xl"></i>
          <p class="text-gray-400">Chain</p>
        </div>

        <ng-container
          *ngIf="
            blockchainInfo && blockchainInfo.chain !== undefined;
            else spinner
          "
        >
          <p>{{ blockchainInfo.chain }}</p>
        </ng-container>

        <ng-template #spinner>
          <app-spinner></app-spinner>
        </ng-template>
      </li>

      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 text-center shadow-white shadow-sm md:shadow-md md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <div class="flex items-center justify-center mb-2">
          <i class="fa-solid fa-chart-line mr-2 text-xl lg:text-2xl"></i>
          <p class="text-gray-400">Difficulty</p>
        </div>

        <ng-container
          *ngIf="
            blockchainInfo && blockchainInfo.difficulty !== undefined;
            else spinner
          "
        >
          <p>{{ blockchainInfo.difficulty | difficultyConversion }}</p>
        </ng-container>

        <ng-template #spinner>
          <app-spinner></app-spinner>
        </ng-template>
      </li>

      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 text-center shadow-white shadow-sm md:shadow-md md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <div class="flex items-center justify-center mb-2">
          <i class="fa-solid fa-network-wired mr-2 text-xl lg:text-2xl"></i>
          <p class="text-gray-400">Network Hash Rate</p>
        </div>

        <ng-container
          *ngIf="
            blockchainInfo && blockchainInfo.networkHashPerSecond !== undefined;
            else spinner
          "
        >
          <p>{{ blockchainInfo.networkHashPerSecond | hashRateConversion }}</p>
        </ng-container>

        <ng-template #spinner>
          <app-spinner></app-spinner>
        </ng-template>
      </li>

      <li
        class="border border-gray-700 rounded-3xl p-3 md:p-6 text-center shadow-white shadow-sm md:shadow-md md:shadow-white lg:hover:scale-105 lg:transform lg:transition-transform lg:duration-500 text-sm"
      >
        <div class="flex items-center justify-center mb-2">
          <i class="fa-solid fa-coins mr-2 text-xl lg:text-2xl"></i>
          <p class="text-gray-400">Pooled Transactions</p>
        </div>

        <ng-container
          *ngIf="
            blockchainInfo && blockchainInfo.pooledTx !== undefined;
            else spinner
          "
        >
          <p>{{ blockchainInfo.pooledTx }}</p>
        </ng-container>

        <ng-template #spinner>
          <app-spinner></app-spinner>
        </ng-template>
      </li>
    </ul>
  </div>

  <!--! latest blocks -->
  <ng-container>
    <div class="bg-gray-700 rounded-lg p-4 lg:mt-4 hidden lg:block">
      <div class="relative w-[780px]">
        <h2
          class="text-white text-lg font-semibold mb-4 text-left my-3 ml-6 flex-grow"
        >
          Latest Blocks
        </h2>
        <ng-container *ngIf="latestBlocks.length == 0">
          <app-spinner class="absolute -top-[18px] right-[580px]"></app-spinner>
        </ng-container>
      </div>

      <table class="divide-y divide-gray-200" *ngIf="latestBlocks.length > 0">
        <thead
          class="text-left text-xs font-medium text-gray-300 uppercase tracking-wider"
        >
          <tr>
            <th class="px-6 py-3">Height</th>
            <th class="px-6 py-3">Timestamp</th>
            <th class="px-6 py-3">Transactions</th>
            <th class="px-6 py-3">Size (KB)</th>
            <th class="px-6 py-3">Weight (KWU)</th>
          </tr>
        </thead>
        <tbody class="text-white divide-y divide-gray-600">
          <tr *ngFor="let block of latestBlocks" class="text-center">
            <td class="px-6 py-4 whitespace-nowrap">
              <a
                routerLink="/insights/block/{{ block.blockHeight }}"
                class="text-orange-400 hover:text-orange-300 transition-colors duration-300"
                >{{ block.blockHeight }}</a
              >
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              {{ +block.time * 1000 | date : "MMM dd, yyyy, HH:mm:ss" }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">{{ block.ntx }}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              {{ trimTrailingZeros((block.size / 1000).toFixed(3)) }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              {{ trimTrailingZeros((block.weight / 1000).toFixed(3)) }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <!--! latest transactions -->
  <ng-container>
    <div class="bg-gray-700 rounded-lg p-4 lg:mt-4 hidden lg:block">
      <div class="relative w-[780px]">
        <h2
          class="text-white text-lg font-semibold mb-4 text-left my-3 ml-6 flex-grow"
        >
          Latest Transactions
        </h2>
        <ng-container *ngIf="latestBlocks && latestTransactions.length == 0">
          <app-spinner class="absolute -top-[18px] right-[525px]"></app-spinner>
        </ng-container>
      </div>

      <table
        class="divide-y divide-gray-200"
        *ngIf="latestTransactions.length > 0"
      >
        <thead
          class="text-left text-xs font-medium text-gray-300 uppercase tracking-wider"
        >
          <tr>
            <th class="px-6 py-3">Transaction ID</th>
            <th class="px-6 py-3">Value (BTC)</th>
            <th class="px-6 py-3">Size (B)</th>
            <th class="px-6 py-3">Time</th>
          </tr>
        </thead>
        <tbody class="text-white divide-y divide-gray-600">
          <tr *ngFor="let tx of latestTransactions" class="text-center">
            <td class="px-6 py-4 whitespace-nowrap">
              <a
                routerLink="/insights/transaction/{{ tx.txId }}"
                class="text-orange-400 hover:text-orange-300 transition-colors duration-300"
                >{{ tx.txId | truncate }}</a
              >
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              {{ calculateTotalValue(tx).toFixed(8) }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">{{ tx.size }}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              {{ +tx.time * 1000 | date : "MMM dd, yyyy, HH:mm:ss" }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
</div>
